//var tipoAtual = "homologacao";
var tipoAtual = "producao";

var VdnPorCartao = {
	"MenuInformacoes" : {
		"Platinum Card" : "81179"},

	"MenuAssistencia" : {
		"Bradesco Perfil Platinum" : "80584",
		"Credit BIN Compartilhada" : "80584",
		"Bradesco Perfil Gold" : "80588",
		"Credit" : "80592",
		"Bradesco American Express Gold Credit" : "80598",
		"Bradesco American Express Credit" : "80602",
		"Blue" : "80606",
		"Platinum Credit" : "80612",
		"Green" : "80620",
		"Gold Credit" : "80626",
		"Gold Card" : "80632",
		"Platinum Card" : "80645"},

	"MenuAssistenciaOpc1" : {
		"Bradesco Perfil Platinum" : "80585",
		"Credit BIN Compartilhada" : "80585",
		"Bradesco Perfil Gold" : "80589",
		"Credit" : "80593",
		"Bradesco American Express Gold Credit" : "80599",
		"Bradesco American Express Credit" : "80603",
		"Blue" : "80607",
		"Platinum Credit" : "80613",
		"Green" : "80621",
		"Gold Credit" : "80627",
		"Gold Card" : "80633",
		"Platinum Card" : "80646"},
		
	"SeguroViagem" : {
		"Bradesco Perfil Platinum" : "85492",
		"Credit BIN Compartilhada" : "85492",
		"Bradesco Perfil Gold" : "85493",
		"Credit" : "85494",
		"Bradesco American Express Gold Credit" : "85495",
		"Bradesco American Express Credit70547" : "85496",
		"Bradesco American Express Credit70563" : "85496",
		"Bradesco American Express Credit70501" : "85503",
		"Blue" : "85497",
		"Platinum Credit" : "85498",
		"Green" : "85499",
		"Gold Credit" : "85500",
		"Gold Card" : "85501",
		"Platinum Card" : "85502"},

	"MenuAssistenciaOpc2" : {
		"Bradesco Perfil Platinum" : "80586",
		"Credit BIN Compartilhada" : "80586",
		"Bradesco Perfil Gold" : "80590",
		"Credit" : "80594",
		"Bradesco American Express Gold Credit" : "80600",
		"Bradesco American Express Credit" : "80604",
		"Blue" : "80608",
		"Platinum Credit" : "80614",
		"Green" : "80622",
		"Gold Credit" : "80628",
		"Gold Card" : "80634",
		"Platinum Card" : "80647"},

	"MenuAssistenciaOpc3" : {
		"Bradesco Perfil Platinum" : "80587",
		"Credit BIN Compartilhada" : "80587",
		"Bradesco Perfil Gold" : "80591",
		"Credit" : "80595",
		"Bradesco American Express Gold Credit" : "80601",
		"Bradesco American Express Credit" : "80605",
		"Blue" : "80609",
		"Platinum Credit" : "80615",
		"Green" : "80623",
		"Gold Credit" : "80629",
		"Gold Card" : "80635",
		"Platinum Card" : "80648"},

	"MenuAssistenciaCartaoInvalido" : {
		"Gold Card" : "81185",
		"Platinum Card" : "81186"},

	"MenuConciergeOpc1" : {
		"Gold Card" : "80636",
		"Platinum Card" : "80649"},
		
	"MenuConciergeOpc2" : {
		"Gold Card" : "80637",
		"Platinum Card" : "80657"},
		
	"MenuConciergeOpc3" : {
		"Gold Card" : "80638",
		"Platinum Card" : "80650"},
		
	"MenuConciergeOpc4" : {
		"Gold Card" : "80639",
		"Platinum Card" : "80651"},
		
	"MenuConciergeOpc9" : {
		"Gold Card" : "80640",
		"Platinum Card" : "80652"},

	"MenuConciergePTS" : {
		"Platinum Card" : "80582"},
		
		
		

	"MenuConciergeRestaurante" : {
		"Blue" : "80610",
		"Gold Credit" : "80630",
		"Platinum Credit" : "80616",
		"Green" : "80624",
		"Credit" : "80596",
		"Bradesco American Express Credit" : "80619",
		"Bradesco American Express Gold Credit" : "80618",
		"Bradesco Perfil Gold" : "80618",
		"Bradesco Perfil Platinum" : "80618",
		"Credit BIN Compartilhada" : "80618"},

	"MenuConciergeIngresso" : {
		"Blue" : "80611",
		"Gold Credit" : "80631",
		"Platinum Credit" : "80617",
		"Green" : "80625",
		"Credit" : "80597"},

	"MenuConciergeAndamento" : {
		"Gold Card" : "81188",
		"Platinum Card" : "81187"},

	"MenuShengenViagem" : {
		"Gold Card" : "80641",
		"Platinum Card" : "80653"},

	"MenuShengenInfo" : {
		"Gold Card" : "80642",
		"Platinum Card" : "80654"},

	"MenuShengenAmex" : {
		"Gold Card" : "80643",
		"Platinum Card" : "80655"},

	"MenuExpressFun" : {
		"Express Fun" : "80658"},

	"MenuShengenSite" : {
		"Gold Card" : "80644",
		"Platinum Card" : "80656"}
};

var CartaoPorDnis = {
		"70285":"Bradesco Perfil Platinum",
		"70291":"Bradesco Perfil Gold",
		"70583":"Credit",
		"70580":"Express Fun",
		"70338":"Bradesco American Express Gold Credit",
		"70563":"Bradesco American Express Credit",
		"70561":"Amex Blue",
		"70574":"Amex Platinum Credit",
		"70553":"Green",
		"70564":"Gold Credit",
		"70575":"Gold Card",
		"70577":"Platinum"
};

var VdnPorDnis = {
		"MenuAssistencia" : {
			"70295" : "80584",
			"70291" : "80588",
			"70583" : "80592",
			"70338" : "80598",
			"70563" : "80602",
			"70561" : "80606",
			"70574" : "80612",
			"70553" : "80620",
			"70564" : "80626",
			"70575" : "80632",
			"70577" : "80645"},
			
		"MenuAssistenciaOpc1" : {
			"70295" : "80585",
			"70291" : "80589",
			"70583" : "80593",
			"70338" : "80599",
			"70563" : "80603",
			"70561" : "80607",
			"70574" : "80613",
			"70553" : "80621",
			"70564" : "80627",
			"70575" : "80633",
			"70577" : "80646"},
			
		"MenuAssistenciaOpc2" : {
			"70295" : "80586",
			"70291" : "80590",
			"70583" : "80594",
			"70338" : "80600",
			"70563" : "80604",
			"70561" : "80608",
			"70574" : "80614",
			"70553" : "80622",
			"70564" : "80628",
			"70575" : "80634",
			"70577" : "80647"},
			
		"MenuAssistenciaOpc3" : {
			"70295" : "80587",
			"70291" : "80591",
			"70583" : "80595",
			"70338" : "80601",
			"70563" : "80605",
			"70561" : "80609",
			"70574" : "80615",
			"70553" : "80623",
			"70564" : "80629",
			"70575" : "80635",
			"70577" : "80648"},
			
		"MenuConciergeOpc1" : {
			"70575" : "80636",
			"70577" : "80649"},
			
		"MenuConciergeOpc2" : {
			"70575" : "80637",
			"70577" : "80657"},
			
		"MenuConciergeOpc3" : {
			"70575" : "80638",
			"70577" : "80650"},
			
		"MenuConciergeOpc4" : {
			"70575" : "80639",
			"70577" : "80651"},
			
		"MenuConciergeOpc9" : {
			"70575" : "80640",
			"70577" : "80652"},
			
		"MenuConciergeRestaurante" : {
			"70561" : "80610",
			"70564" : "80630",
			"70574" : "80616",
			"70553" : "80624",
			"70583" : "80596",
			"70563" : "80619",
			"70338" : "80618",
			"70291" : "80618",
			"70285" : "80618"},
			
		"MenuConciergeIngresso" : {
			"70561" : "80611",
			"70564" : "80631",
			"70574" : "80617",
			"70553" : "80625",
			"70583" : "80597"},
			
		"MenuShengenViagem" : {
			"70575" : "80641",
			"70577" : "80653"},
			
		"MenuShengenInfo" : {
			"70575" : "80642",
			"70577" : "80654"},
			
		"MenuShengenAmex" : {
			"70575" : "80643",
			"70577" : "80655"},
			
		"MenuShengenSite" : {
			"70575" : "80644",
			"70577" : "80656"}
};

function getTipoMenu(opcaoMenu)
{
	var assistencia=false;

	switch(opcaoMenu)
	{
	case "MenuAssistencia":
		assistencia=true;
		break;
	case "MenuAssistenciaOpc1":
		assistencia=true;
		break;
	case "MenuAssistenciaOpc2":
		assistencia=true;
		break;
	case "MenuAssistenciaOpc3":
		assistencia=true;
		break;
	}
	return assistencia; 
}

function setContingencia(dadosCliente){
	var tipoCartao = dadosCliente["tipoCartao"];
	var opcaoMenu = dadosCliente["opcaoMenu"];
	var dnis = dadosCliente["dnis"];
	var opcao = dadosCliente["opcao"];
	var transfer = dadosCliente["transfer"];
	var perfilCartao = dadosCliente["perfilCartao"];
	var evento = dadosCliente["evento"];
	
	//Garantir variaveis definidas
	if(tipoCartao == null || tipoCartao == undefined || tipoCartao == ""){
		tipoCartao = "";
	}
	if(opcaoMenu == null || opcaoMenu == undefined || opcaoMenu == ""){
		opcaoMenu = "";
	}
	if(dnis == null || dnis == undefined || dnis == ""){
		dnis = "";
	}
	if(opcao == null || opcao == undefined || opcao == ""){
		opcao = "";
	}
	if(transfer == null || transfer == undefined || transfer == ""){
		transfer = "";
	}
	if(perfilCartao == null || perfilCartao == undefined || perfilCartao == ""){
		perfilCartao = "";
	}
	if(evento == null || evento == undefined || evento == ""){
		evento = "";
	}
	
	//sem evento
	if(evento != "")
	{
		opcao = "transferir";
		opcaoMenu = "MenuAssistenciaOpc1";
		evento = "237";
	}else if(opcaoMenu != ""){
		switch(opcaoMenu)
		{
			case "MenuInformacoes":
			case "MenuAssistencia":
			case "MenuAssistenciaOpc1":
			case "MenuAssistenciaOpc2":
			case "MenuAssistenciaOpc3":
			case "MenuAssistenciaCartaoInvalido":
			case "MenuConciergeOpc1":
			case "MenuConciergeOpc2":
			case "MenuConciergeOpc3":
			case "MenuConciergeOpc4":
			case "MenuConciergeOpc9":
			case "MenuConciergePTS":
			case "MenuConciergeRestaurante":
			case "MenuConciergeIngresso":
			case "MenuConciergeAndamento":
			case "MenuShengenViagem":
			case "MenuShengenInfo":
			case "MenuShengenAmex":
			case "MenuShengenSite":
				opcao = "transferir";
				evento = "229";
				break;
			default:
				opcao = "transferir";
				opcaoMenu = "MenuInformacoes";
				evento = "229";
				break;
		}
	}else if(opcao != ""){
		switch(opcao)
		{
			case "perfil 1":
				evento = "219";
				break;
			case "perfil 2":
				evento = "220";
				break;
			case "perfil 3":
				evento = "221";
				break;
			case "schengen":
				evento = "222";
				break;
			case "assistencia":
				evento = "223";
				break;
			case "concierge":
				evento = "224";
				break;
			case "andamento":
				evento = "225";
				break;
			case "schengeninfo":
				evento = "226";
				break;
			case "schengenamex":
				evento = "227";
				break;
			case "schengensite":
				evento = "228";
				break;
			case "abandono":
				evento = "232";
				break;
			case "erro":
				evento = "233";
				break;
			case "finalizar":
				evento = "231";
				break;
			default:
				if(perfilCartao == "perfil 1"){
					evento = "219";
					opcao = "perfil 1";
				}else if(perfilCartao == "perfil 2"){
					evento = "220";
					opcao = "perfil 2";
				}else if(perfilCartao == "perfil 3"){
					evento = "221";
					opcao = "perfil 3";
				}else{
					evento = "234";
					opcao = "transferir";
					opcaoMenu = "MenuAssistenciaOpc1";
				}
				break;
		}
	}
	dadosCliente["tipoCartao"] = tipoCartao;
	dadosCliente["opcaoMenu"] = opcaoMenu;
	dadosCliente["dnis"] = dnis;
	dadosCliente["opcao"] = opcao;
	dadosCliente["transfer"] = transfer;
	dadosCliente["perfilCartao"] = perfilCartao;
	dadosCliente["evento"] = evento;
	return dadosCliente;
}
function getVdnDeriva(dadosCliente){
	var tipoCartao = dadosCliente["tipoCartao"];
	var opcaoMenu = dadosCliente["opcaoMenu"];
	var dnis = dadosCliente["dnis"];
	var vdn;
	
	//homologacao ou producao
	if(getMatch(tipoAtual,"homologacao")){
		vdn = "80103";
	}else if(getMatch(tipoAtual,"producao")){
		if(getMatch(opcaoMenu,"SeguroViagem") && getMatch(tipoCartao,"Bradesco American Express Credit")){
			vdn = VdnPorCartao[opcaoMenu][tipoCartao+dnis];
		}else{
			vdn = VdnPorCartao[opcaoMenu][tipoCartao];
		}
		//contingencia nivel 1
		if(getFalse(vdn)){
			vdn = VdnPorDnis[opcaoMenu][dnis];
			
			//contingencia nivel 2
			if(getFalse(vdn)){
				vdn = "80855";
			}
		}
	}
	
	if(getTipoMenu(opcaoMenu)){
		dadosCliente = setCampoJson(dadosCliente, "TipoServico", "Assistencia");
	}
	dadosCliente = setCampoJson(dadosCliente, "transfer", vdn);
	return dadosCliente;
}